askToCreateNewGroup() {
    NEW=$(askForInput "Do you want to create a new server group ? (y/n)")
    case $NEW in
        y|Y)
            createRemoteConfigurationFile
            ;;
        n|N)
            log "Please, choose from one of the available groups:"
            displayGroupList
            askForRemoteGroupName
            ;;
        *)
            errorLog "Please answer with y (yes) or n (no)"
            askToCreateNewGroup
            ;;
    esac
}

isPasswordBasedOrSSH() {
    SSH=$(askForInput "Do you have SSH key pair configured in remote server ? (y/n)")
    case $SSH in
        y|Y)
            # Do Nothing
            ;;
        n|N)
            PASS=$(askForInput "Please provide password : ")
            ;;
        *) 
            errorLog "Please answer with y (yes) or n (no)"
            isPasswordBasedOrSSH
            ;;
    esac
}

askForOneTimeCommand() {
    ONCE=$(askForInput "Would you like to execute a one time command? (y/n)")
    case $ONCE in
        y|Y) 
            askForCredentials
            isPasswordBasedOrSSH
            CMD=$(askForInput "Input the desired command or path to script : ")
            test -z "$PASS" && sshConnectAndExecute "$CMD"
            test -n "$PASS" && passwordConnectAndExecute "$PASS" "$CMD"
            ;;
        n|N) 
            log "Goodbye."
            exit 0
            ;;
        *) 
            errorLog "Please answer with y (yes) or n (no)"
            askForOneTimeCommand
            ;;
    esac
}

askCreateConfigurationOrEstablishConnection() {
    CREATE=$(askForInput "Would you like to create it? (y/n)")
    case $CREATE in
        y|Y) 
            createRemoteConfigurationFile
            ;;
        n|N) 
            askForOneTimeCommand
            ;;
        *) 
            errorLog "Please answer with y (yes) or n (no)"
            askCreateConfigurationOrEstablishConnection
            ;;
    esac
}

askForMoreConfigurations() {
    MORE=$(askForInput "Would you like to add another remote connection? (y/n)")
    case $MORE in
        y|Y)
            exit 0
            ;;
        n|N)
            exit 1
            ;;
        *)
            errorLog "Please answer with y (yes) or n (no)"
            askForMoreConfigurations
            ;;
    esac
}

displayGroupList() {
    IFS=
    for group in "${GROUP_LIST[@]}"; do
        log "$group"
    done
    IFS=$DEFAULT_IFS
}

displayConnectionList() {
    IFS=
    for conn in "${CONNECTION_LIST[@]}"
    do
        log "$conn"
    done
    IFS=$DEFAULT_IFS
}

console() {
    printHeader
    log "[ REC ] Remote Execution Console"
    log "The following remote server groups are available:"
    getGroupList
    displayGroupList
    askForRemoteGroupName
    getConnectionList "$REMOTEFILE"
    displayConnectionList
}

checkRemoteConfiguration() {
    # MUST HANDLE IF THE FILE EXISTS BUT IS EMPTY.
    checkForRemoteFile
    if [ "$REMOTECONFIG" == "false" ]
    then
        log "No remote server configuration files exist."
        askCreateConfigurationOrEstablishConnection
    # elif check if empty REMOTECONFIG
        #log "Remote server configuration file is empty"
        #askCreateConfigurationOrEstablishConnection
    # elif check if REMOTECONFIG has appropriate format
        #log "Remote server configuration file has invalid format"
        # make backup of existing .remote file and then ask user to generate a new one.
    else
        # THIS IS JUST FOR TEST LATER, THE CONSOLE MUST BE DISPLAYED
        # WITH ALL AVAILABLE CONNECTIONS AND OPTIONS
        console
    fi
}