DEFAULT_IFS="$IFS"

checkIfConnectionExists() {
    grep "$1)" $REMOTEFILE >> "$LOG"
    test "$?" -eq 1 && errorLog "The connection number $1 does not exist. Please use one of the number options available." && displayConnectionList && askForExecution "$ONLYNAME"
}

getGroupList() {
    GROUP_LIST=()
    for file in ${GROUPDIR}remote*
    do
        GROUP="${file:16:-1}"
        GROUP_LIST+=("$GROUP")
    done
}

checkForRemoteFile() {
    for file in ${GROUPDIR}remote*
    do
        [ -f "$file" ] && logToFile "Found $file" && REMOTECONFIG="true"
    done
}

checkForExistingRemoteGroup() {
    [ -f "$1" ] && errorLog "Group already exists $1. Please input another name" && askForNewRemoteGroupName
}

checkIfRemoteGroupExists() {
    THEFILENAME=$1
    ONLYNAME=${THEFILENAME:16:-1}
    [ ! -f "$1" ] && errorLog "Group name '$ONLYNAME' was not found." && askToCreateNewGroup
    # CHECK IF RemoteGroup file is empty and then ask to add connections.
}

getConnection() {
    CONNECTION=$(grep "$1)" "$REMOTEFILE")
    log "Execution set for $CONNECTION"
    CONNECTION="${CONNECTION#*[}"
    CONNECTION="${CONNECTION%]*}"
}

getConnectionList() {
    logToFile $1
    IFS=$'\n'
    CONNECTION_LIST=($(< "$1"))
    IFS="$DEFAULT_IFS"
}

createRemoteConfigurationFile() {
    askForNewRemoteGroupName
    touch "$REMOTEFILE"
    while true
    do
        getConnectionList "$REMOTEFILE"
        declare -i NUM
        NUM="${#CONNECTION_LIST[@]}"
        NUM+=1
        askForCredentials
        # MUST FIND A WAY TO ENUMERATE EACH CONNECTION, MAYBE A LIST AND CHECK IF CONNECTION ALREADY EXISTS BEFORE RE ADDING00
        # THE FOLLOWING STRING IS FAILING TO ADD THE REMOTEUSER
        echo "${NUM}) [${REMOTEUSER}@${REMOTEHOST}]" >> "$REMOTEFILE"
        $(askForMoreConfigurations)
        MORE=$?
        if [ $MORE -eq 1 ]; then
            break
        fi
    done
    # EXECUTE THE CONSOLE
}

addRemoteConfiguration() {
    while true
    do
        getConnectionList "$REMOTEFILE"
        declare -i NUM
        NUM="${#CONNECTION_LIST[@]}"
        NUM+=1
        askForCredentials
        # MUST FIND A WAY TO ENUMERATE EACH CONNECTION, MAYBE A LIST AND CHECK IF CONNECTION ALREADY EXISTS BEFORE RE ADDING00
        # THE FOLLOWING STRING IS FAILING TO ADD THE REMOTEUSER
        echo "${NUM}) [${REMOTEUSER}@${REMOTEHOST}]" >> "$REMOTEFILE"
        $(askForMoreConfigurations)
        MORE=$?
        if [ $MORE -eq 1 ]; then
            break
        fi
    done
}